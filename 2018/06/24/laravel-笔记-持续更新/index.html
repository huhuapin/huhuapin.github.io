<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Laravel 笔记 持续更新 - 胡华聘的个人博客</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="胡华聘的个人博客"><meta name="msapplication-TileImage" content="https://static.huhuapin.cn/uploads/2017/08/cropped-u2426278734153718334fm11gp0-32x32.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="胡华聘的个人博客"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="安装 1composer create-project --prefer-dist laravel&amp;#x2F;laravel blog 5.5.*  路由  基本形式 ： 12345678910111213141516Route::get(&amp;amp;#x27;&amp;#x2F;&amp;amp;#x27;,&amp;amp;#x27;控制器@方法&amp;amp;#x27;);Route::get(&amp;amp;#x27;&amp;#x2F;post&amp;amp;#x27;,&amp;amp;#x27;\App\Http\Contr"><meta property="og:type" content="blog"><meta property="og:title" content="Laravel 笔记 持续更新"><meta property="og:url" content="https://www.huhuapin.cn/2018/06/24/laravel-%E7%AC%94%E8%AE%B0-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/"><meta property="og:site_name" content="胡华聘的个人博客"><meta property="og:description" content="安装 1composer create-project --prefer-dist laravel&amp;#x2F;laravel blog 5.5.*  路由  基本形式 ： 12345678910111213141516Route::get(&amp;amp;#x27;&amp;#x2F;&amp;amp;#x27;,&amp;amp;#x27;控制器@方法&amp;amp;#x27;);Route::get(&amp;amp;#x27;&amp;#x2F;post&amp;amp;#x27;,&amp;amp;#x27;\App\Http\Contr"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.huhuapin.cn/img/og_image.png"><meta property="article:published_time" content="2018-06-24T06:46:19.000Z"><meta property="article:modified_time" content="2021-11-18T09:05:07.732Z"><meta property="article:author" content="胡华聘"><meta property="article:tag" content="laravel"><meta property="article:tag" content="笔记"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.huhuapin.cn/2018/06/24/laravel-%E7%AC%94%E8%AE%B0-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/"},"headline":"Laravel 笔记 持续更新","image":["https://www.huhuapin.cn/img/og_image.png"],"datePublished":"2018-06-24T06:46:19.000Z","dateModified":"2021-11-18T09:05:07.732Z","author":{"@type":"Person","name":"胡华聘"},"publisher":{"@type":"Organization","name":"胡华聘的个人博客","logo":{"@type":"ImageObject","url":"https://static.huhuapin.cn/uploads/2017/08/logo1.jpg"}},"description":"安装 1composer create-project --prefer-dist laravel&#x2F;laravel blog 5.5.*  路由  基本形式 ： 12345678910111213141516Route::get(&amp;#x27;&#x2F;&amp;#x27;,&amp;#x27;控制器@方法&amp;#x27;);Route::get(&amp;#x27;&#x2F;post&amp;#x27;,&amp;#x27;\\App\\Http\\Contr"}</script><link rel="canonical" href="https://www.huhuapin.cn/2018/06/24/laravel-%E7%AC%94%E8%AE%B0-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/"><link rel="icon" href="https://static.huhuapin.cn/uploads/2017/08/cropped-u2426278734153718334fm11gp0-32x32.jpg"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.15.2/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link href="https://cdn.bootcss.com/KaTeX/0.7.1/katex.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-DE8QBXRKGH" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-DE8QBXRKGH');</script><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://static.huhuapin.cn/uploads/2017/08/logo1.jpg" alt="胡华聘的个人博客" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">时间轴</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="GitHub" href="https://github.com/huhuapin"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-06-24T06:46:19.000Z" title="2018-6-24 2:46:19 ├F10: PM┤">2018-06-24</time>发表</span><span class="level-item"><time dateTime="2021-11-18T09:05:07.732Z" title="2021-11-18 5:05:07 ├F10: PM┤">2021-11-18</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/PHP/">PHP</a></span><span class="level-item">17 分钟读完 (大约2556个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">Laravel 笔记 持续更新</h1><div class="content"><h2 id="安装"><a class="markdownIt-Anchor" href="#安装"></a> 安装</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer create-project --prefer-dist laravel/laravel blog 5.5.*</span><br></pre></td></tr></table></figure>
<h2 id="路由"><a class="markdownIt-Anchor" href="#路由"></a> 路由</h2>
<h3 id="基本形式"><a class="markdownIt-Anchor" href="#基本形式"></a> 基本形式 ：</h3>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">&#x27;/&#x27;</span>,<span class="string">&#x27;控制器@方法&#x27;</span>);</span><br><span class="line">Route::get(<span class="string">&#x27;/post&#x27;</span>,<span class="string">&#x27;\App\Http\Controllers\PostController@index&#x27;</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">对应html代码</span></span><br><span class="line"><span class="comment">&lt;form action = &quot;/post&quot; methot = &quot;GET&quot;&gt;</span></span><br><span class="line"><span class="comment">&lt;/form&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Route::put(<span class="string">&#x27;/post&#x27;</span>,<span class="string">&#x27;\App\Http\Controllers\PostController@index&#x27;</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">对应html代码</span></span><br><span class="line"><span class="comment">&lt;form action = &quot;/post&quot; methot = &quot;POST&quot;&gt;</span></span><br><span class="line"><span class="comment">	&#123;&#123;method_filed(&quot;PUT)&#125;&#125;</span></span><br><span class="line"><span class="comment">&lt;/form&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Route::any(<span class="string">&#x27;/post&#x27;</span>,<span class="string">&#x27;\App\Http\Controllers\PostController@index&#x27;</span>);<span class="comment">//支持所有提交方法</span></span><br><span class="line">Route::match((<span class="string">&#x27;POST&#x27;</span>,<span class="string">&#x27;GET&#x27;</span>),<span class="string">&#x27;/post&#x27;</span>,<span class="string">&#x27;\App\Http\Controllers\PostController@index&#x27;</span>);<span class="comment">//支持POST和GET方法</span></span><br></pre></td></tr></table></figure>
<span id="more"></span>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">&#x27;/posts&#x27;</span>,[<span class="string">&#x27;as&#x27;</span>=&gt;<span class="string">&#x27;posts&#x27;</span>,<span class="string">&#x27;uses&#x27;</span>=&gt;<span class="string">&#x27;PostController@index&#x27;</span>]);</span><br><span class="line"><span class="comment">//  posts路由，as是给这个路由重命名为posts，这样就可以通过route(&#x27;posts&#x27;,parameter)来访问这个路由,parameter是路由中的参数，可以是数组，uses对应的是默认控制器方法  </span></span><br></pre></td></tr></table></figure>
<h3 id="路由参数"><a class="markdownIt-Anchor" href="#路由参数"></a> 路由参数：</h3>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">&#x27;/post&#123;id&#125;&#x27;</span>,<span class="string">&#x27;\App\Http\Controllers\PostController@index&#x27;</span>);<span class="comment">//传进来参数id</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"><span class="variable">$id</span></span>)</span>&#123;</span><br><span class="line">      <span class="comment">//从对应的控制器的方法里接收</span></span><br><span class="line">	&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="路由分组"><a class="markdownIt-Anchor" href="#路由分组"></a> 路由分组：</h3>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Route::group([<span class="string">&#x27;prefix&#x27;</span>=&gt;<span class="string">&#x27;post&#x27;</span>],<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	Route::get(<span class="string">&#x27;/&#x27;</span>,<span class="string">&#x27;\App\Http\Controllers\PostController@index&#x27;</span>);<span class="comment">//对应&#x27;/post&#x27;</span></span><br><span class="line">	Route::post(<span class="string">&#x27;/&#x27;</span>,<span class="string">&#x27;\App\Http\Controllers\PostController@index&#x27;</span>);<span class="comment">//同上</span></span><br><span class="line">	Route::post(<span class="string">&#x27;/creat&#x27;</span>,<span class="string">&#x27;\App\Http\Controllers\PostController@index&#x27;</span>);<span class="comment">//对应&#x27;/post/create&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>url()</p>
<p><code>url</code> 辅助函数可用于为应用生成任意 URL，并且生成的 URL 会自动使用当前请求的 <code>scheme</code>（HTTP or HTTPS） 和 <code>host</code> 属性</p>
</li>
<li>
<p>asset</p>
<p>asset()方法用于引入 CSS/JavaScript/images 等文件,文件必须存放在public文件目录下。</p>
</li>
</ul>
<h2 id="渲染"><a class="markdownIt-Anchor" href="#渲染"></a> 渲染</h2>
<h3 id="基本与ci相似"><a class="markdownIt-Anchor" href="#基本与ci相似"></a> 基本与CI相似</h3>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"><span class="variable">$value</span>=<span class="string">&#x27;&#x27;</span></span>)</span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">   	<span class="keyword">return</span> view(<span class="string">&quot;post/index&quot;</span>,<span class="variable">$data</span>);<span class="comment">//渲染view/post/index.blade.php文件,$data为数组</span></span><br><span class="line">       <span class="comment">//或者 return view(&quot;post/index&quot;)-&gt;with([&#x27;post&#x27;=&gt;$post]);</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h2 id="blade模板"><a class="markdownIt-Anchor" href="#blade模板"></a> blade模板</h2>
<h3 id="if语句"><a class="markdownIt-Anchor" href="#if语句"></a> if语句</h3>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">if</span> (<span class="variable">$bool</span> == <span class="literal">false</span>)</span><br><span class="line">    &lt;h2 <span class="class"><span class="keyword">class</span>=&quot;<span class="title">blog</span>-<span class="title">post</span>-<span class="title">title</span>&quot;&gt;</span>&#123;&#123;<span class="variable">$bool</span>&#125;&#125;&lt;/h2&gt;</span><br><span class="line">@<span class="keyword">elseif</span></span><br><span class="line">	···</span><br><span class="line">@<span class="keyword">else</span></span><br><span class="line">	···</span><br><span class="line">@<span class="keyword">endif</span></span><br></pre></td></tr></table></figure>
<h3 id="循环"><a class="markdownIt-Anchor" href="#循环"></a> 循环</h3>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">for</span> (<span class="variable">$i</span>=<span class="number">0</span>;<span class="variable">$i</span>&lt;<span class="number">10</span>;<span class="variable">$i</span>++)</span><br><span class="line">     &lt;h2 <span class="class"><span class="keyword">class</span>=&quot;<span class="title">blog</span>-<span class="title">post</span>-<span class="title">title</span>&quot;&gt;</span>&#123;&#123;<span class="variable">$bool</span>&#125;&#125;&lt;/h2&gt;</span><br><span class="line">@<span class="keyword">endfor</span></span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">foreach</span> (<span class="variable">$users</span> <span class="keyword">as</span> <span class="variable">$k</span> =&gt; <span class="variable">$v</span>)</span><br><span class="line">    &lt;p&gt;此用户为 &#123;&#123;<span class="variable">$k</span>.<span class="string">&#x27;--&#x27;</span>.<span class="variable">$v</span>&#125;&#125;&lt;/p&gt;</span><br><span class="line"><span class="comment">//$loop-&gt;iteration  从1开始循环计数  $loop-&gt;index  从0开始计数</span></span><br><span class="line">@<span class="keyword">endforeach</span></span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">    &lt;p&gt;我永远都在跑循环。&lt;/p&gt;</span><br><span class="line">@<span class="keyword">endwhile</span></span><br></pre></td></tr></table></figure>
<h3 id="引用与调用"><a class="markdownIt-Anchor" href="#引用与调用"></a> 引用与调用</h3>
<p>将相同的部分全部写出来，将不同的部分用<code>@yield('content')</code>代替，然后放在<code>view/layout/main.blade.php</code>下，引用的时候：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">extends</span>(<span class="string">&#x27;layout.main&#x27;</span>)</span><br><span class="line">@section(<span class="string">&#x27;content&#x27;</span>)</span><br><span class="line">	<span class="comment">// code....</span></span><br><span class="line">@endsection</span><br></pre></td></tr></table></figure>
<h3 id="渲染为html-content"><a class="markdownIt-Anchor" href="#渲染为html-content"></a> 渲染为html   <code>&#123;!! $content !!&#125;</code></h3>
<h2 id="migration"><a class="markdownIt-Anchor" href="#migration"></a> migration</h2>
<ul>
<li>
<p>作用：记录对数据库的操作，实现对数据库的迁移</p>
</li>
<li>
<p>在命令行输入<code>php artisan make:migration create_posts_table +(名字，一般命名为creat_表名_table)</code></p>
</li>
<li>
<p>用migration建表：在migration的up（创建函数）里写</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Schema::create(<span class="string">&#x27;posts&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">Blueprint <span class="variable">$table</span></span>) </span>&#123;</span><br><span class="line">            <span class="variable">$table</span>-&gt;increments(<span class="string">&#x27;id&#x27;</span>);<span class="comment">//自增id</span></span><br><span class="line">            <span class="variable">$table</span>-&gt;string(<span class="string">&#x27;title&#x27;</span>,<span class="number">100</span>)-&gt;default(<span class="string">&#x27;&#x27;</span>);<span class="comment">//vachar类型的标题，最大长度100</span></span><br><span class="line">            <span class="variable">$table</span>-&gt;text(<span class="string">&#x27;content&#x27;</span>);<span class="comment">//text类型的content</span></span><br><span class="line">            <span class="variable">$table</span>-&gt;integer(<span class="string">&#x27;user_id&#x27;</span>)-&gt;default(<span class="number">0</span>);</span><br><span class="line">            <span class="variable">$table</span>-&gt;timestamps();<span class="comment">//自动创建create_at update_at字段</span></span><br><span class="line">        &#125;);<span class="comment">// 如果想更新，把create换成table</span></span><br></pre></td></tr></table></figure>
<p>设置字段的默认长度在<code>\App\Providers\AppServiceProvider.php</code>的boot里面设置</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Support</span>\<span class="title">Facades</span>\<span class="title">Schema</span>;</span><br><span class="line">···</span><br><span class="line"><span class="comment">//默认mb4string 类型长度</span></span><br><span class="line">        Schema::defaultStringLength(<span class="number">191</span>);</span><br></pre></td></tr></table></figure>
<p>然后运行 <code>php artisan migrate</code>就会自动建表了</p>
</li>
<li>
<p>回滚</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Schema::dropIfExists(<span class="string">&#x27;posts&#x27;</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="文章模型"><a class="markdownIt-Anchor" href="#文章模型"></a> 文章模型</h2>
<p>模型使用ORM来创建模型，使用class来表示一个表，每一个表都有一个类来来提供给上层使用，可以通过对模型的查询，增加，删除操作，来对数据表操作，这样就将数据表抽象化</p>
<h3 id="创建模型"><a class="markdownIt-Anchor" href="#创建模型"></a> 创建模型</h3>
<p>在命令行输入以下代码：<code>php artisan make:model Post</code>默认对应表posts</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Post</span> <span class="keyword">extends</span> <span class="title">Model</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//默认对应的表=&gt;posts</span></span><br><span class="line"><span class="comment">//指定表名 protected $table = &quot;posts2&quot;;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="默认行为"><a class="markdownIt-Anchor" href="#默认行为"></a> 默认行为</h3>
<p><code>Eloquent</code> 默认每张表的主键名为<code>id</code>，你可以在模型类中定义一个<code>$primaryKey</code>属性来覆盖该约定。</p>
<p>此外，<code>Eloquent</code>默认主键字段是自增的整型数据，这意味着主键将会被自动转化为<code>int</code>类型，如果你想要使用非自增或非数字类型主键，必须在对应模型中设置<code>$incrementing</code>属性为<code>false</code>。</p>
<p>默认情况下，<code>Eloquent</code> 期望<code>created_at</code>和<code>updated_at</code>已经存在于数据表中，如果你不想要这些 <code>Laravel</code> 自动管理的列，在模型类中设置<code>$timestamps</code>属性为<code>false</code></p>
<h3 id="在控制器使用模型"><a class="markdownIt-Anchor" href="#在控制器使用模型"></a> 在控制器使用模型</h3>
<p><code>$post = \App\Post;</code>由于模型经常使用，可以在控制器上方加<code>use \App\Post;</code>在方法里面可以直接写。返回的是collection对象</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$post</span> = Post::orderBy(<span class="string">&#x27;create_at&#x27;</span>,<span class="string">&#x27;desc&#x27;</span>)-&gt;get();<span class="comment">//获取posts表单额所有数据，并按照时间降序排列   </span></span><br></pre></td></tr></table></figure>
<h3 id="模型关联"><a class="markdownIt-Anchor" href="#模型关联"></a> 模型关联</h3>
<h4 id="belongsto"><a class="markdownIt-Anchor" href="#belongsto"></a> belongsTo</h4>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Post</span> <span class="keyword">extends</span> <span class="title">Model</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">user</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;belongsTo(<span class="string">&#x27;App\user&#x27;</span>,<span class="string">&#x27;user_id&#x27;</span>,<span class="string">&#x27;id&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此方法会从关联模型(App\user)中，查询此模型(Post)的外键(user_id)为关联模型的主键(id)的数据</p>
<p>使用： <code>Post::find($id)-&gt;get()[0]-&gt;name</code>用来获取id为$id的文章的user的姓名</p>
<h4 id="hasmany"><a class="markdownIt-Anchor" href="#hasmany"></a> hasMany</h4>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Member</span> <span class="keyword">extends</span> <span class="title">Model</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">blogs</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;hasMany(<span class="string">&#x27;App\Blog&#x27;</span>,<span class="string">&quot;member_id&quot;</span>,<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此方法会从关联模型(App\Blog)中，查找关联模型的外键(member_id)为此模型(Member)的主键(id)的数据</p>
<h4 id="belongstomany"><a class="markdownIt-Anchor" href="#belongstomany"></a> belongsTomany</h4>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Member</span> <span class="keyword">extends</span> <span class="title">Model</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">projects</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;belongsToMany(<span class="string">&#x27;App\Project&#x27;</span>,<span class="string">&#x27;member_project&#x27;</span>,<span class="string">&#x27;member_id&#x27;</span>,<span class="string">&#x27;project_id&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此方法会从关联模型(App\Project)cha数据,条件为：先在表(member_project)找到此模型(member)主键为(member_id)数据,找到对应的project_id，然后在project表中找主键为project的数据</p>
<h4 id="数据填充"><a class="markdownIt-Anchor" href="#数据填充"></a> <a target="_blank" rel="noopener" href="https://github.com/fzaninotto/Faker">数据填充</a></h4>
<p>在<code>database/factories</code>里写</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$factory</span>-&gt;define(App\Post::class, <span class="function"><span class="keyword">function</span> (<span class="params">Faker\<span class="built_in">Generator</span> <span class="variable">$faker</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">        <span class="string">&#x27;title&#x27;</span> =&gt; <span class="variable">$faker</span>-&gt;sentence(<span class="number">6</span>),<span class="comment">//6个单词</span></span><br><span class="line">        <span class="string">&#x27;content&#x27;</span> =&gt; <span class="variable">$faker</span>-&gt;paragraph(<span class="number">10</span>),<span class="comment">//10句话</span></span><br><span class="line">    ];</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>然后再命令框运行 <code>php artisan tinker</code> -&gt;<code>factory(App\Post::class,20)-&gt;create();</code></p>
<h4 id="简单分页"><a class="markdownIt-Anchor" href="#简单分页"></a> 简单分页</h4>
<p>控制器里写</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$post</span> = Post::orderBy(<span class="string">&#x27;create_at&#x27;</span>,<span class="string">&#x27;desc&#x27;</span>)-&gt;paginate(<span class="number">10</span>);<span class="comment">//每页显示的条数</span></span><br><span class="line"><span class="keyword">return</span> view(<span class="string">&quot;post/index&quot;</span>,<span class="keyword">array</span>(<span class="string">&#x27;posts&#x27;</span>=&gt;<span class="variable">$posts</span>,));</span><br></pre></td></tr></table></figure>
<p>blade里写</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;<span class="variable">$post</span>-&gt;links()&#125;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="字符截断"><a class="markdownIt-Anchor" href="#字符截断"></a> 字符截断</h4>
<p>blade页面写</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;str_limit(<span class="variable">$post</span>-&gt;content,<span class="number">100</span>,<span class="string">&#x27;...&#x27;</span>)&#125;&#125;<span class="comment">//显示100字符，超出部分显示...</span></span><br></pre></td></tr></table></figure>
<h2 id="文章的增删改查"><a class="markdownIt-Anchor" href="#文章的增删改查"></a> 文章的增删改查</h2>
<h3 id="文章详情页"><a class="markdownIt-Anchor" href="#文章详情页"></a> 文章详情页</h3>
<p>路由时用的是模型绑定:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">&#x27;/posts/&#123;post&#125;&#x27;</span>,<span class="string">&#x27;\App\Http\Controllers\PostController@show&#x27;</span>)-&gt;where([<span class="string">&#x27;post&#x27;</span> =&gt; <span class="string">&#x27;[0-9]+&#x27;</span>]);<span class="comment">//绑定post模型</span></span><br></pre></td></tr></table></figure>
<p>控制器里面写</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">Post <span class="variable">$post</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    	<span class="variable">$data</span>[<span class="string">&#x27;post&#x27;</span>] = <span class="variable">$post</span>;</span><br><span class="line">    	<span class="keyword">return</span> view(<span class="string">&#x27;post/show&#x27;</span>,<span class="variable">$data</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="创建文章"><a class="markdownIt-Anchor" href="#创建文章"></a> 创建文章</h3>
<ul>
<li>
<p>post提交时，必须使用一个函数<code>&#123;&#123;csrf_field()&#125;&#125;</code></p>
</li>
<li>
<p>接收参数<code>request()-&gt;all();</code>或者<code>request(['title','content']);</code>特定字段名</p>
</li>
<li>
<p>使用post的crate方法时，需要在post模型里面添加两个属性</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="variable">$guarded</span> = [];<span class="comment">//不可以注入的字段</span></span><br><span class="line"><span class="keyword">protected</span> <span class="variable">$fillable</span> = [<span class="string">&#x27;title&#x27;</span>,<span class="string">&#x27;content&#x27;</span>];<span class="comment">//可以注入的数据字段</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>利用模型存数据库</p>
<p>Post::create([数组]);//此方法会同时插入created_at 和 upadated_at字段</p>
</li>
<li>
<p>表单验证</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">$this</span>-&gt;validate(request(), [</span><br><span class="line">            <span class="string">&#x27;title&#x27;</span>   =&gt; <span class="string">&#x27;required|string|max:100|min:5&#x27;</span>, <span class="comment">//title的验证规则:必填，字符串，长度大于5小于100</span></span><br><span class="line">            <span class="string">&#x27;content&#x27;</span> =&gt; <span class="string">&#x27;required|string|min:10&#x27;</span>,</span><br><span class="line">],[</span><br><span class="line">  <span class="string">&#x27;title.min&#x27;</span> =&gt;<span class="string">&#x27;文章标题过短&#x27;</span>,<span class="comment">//自定义错误提示</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure>
<p>返回错误时会可以在前端blade模板中直接写</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">if</span>(count(<span class="variable">$errors</span>)&gt;<span class="number">0</span>)</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">alert</span>-<span class="title">danger</span> <span class="title">alert</span>&quot;&gt;</span></span><br><span class="line"><span class="class">  @<span class="title">foreach</span>($<span class="title">errors</span>-&gt;<span class="title">all</span>() <span class="title">as</span> $<span class="title">error</span>)</span></span><br><span class="line"><span class="class">	&lt;<span class="title">li</span>&gt;</span>&#123;&#123;<span class="variable">$error</span>&#125;&#125;&lt;/li&gt;</span><br><span class="line">  @<span class="keyword">endforeach</span></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">@<span class="keyword">endif</span></span><br></pre></td></tr></table></figure>
<p>如果验证失败后想进行什么操作</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">Validator</span>;</span><br><span class="line">·</span><br><span class="line">·</span><br><span class="line">·</span><br><span class="line"><span class="variable">$validator</span> = Validator::make(<span class="variable">$request</span>-&gt;all(),[</span><br><span class="line">    <span class="string">&#x27;title&#x27;</span>   =&gt; <span class="string">&#x27;required|string|max:100|min:5&#x27;</span>, <span class="comment">//title的验证规则:必填，字符串，长度大于5小于100</span></span><br><span class="line">    <span class="string">&#x27;content&#x27;</span> =&gt; <span class="string">&#x27;required|string|min:10&#x27;</span>,</span><br><span class="line">],[</span><br><span class="line">    <span class="string">&#x27;title.min&#x27;</span> =&gt;<span class="string">&#x27;文章标题过短&#x27;</span>,<span class="comment">//自定义错误提示</span></span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果验证失败</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$validator</span>-&gt;fails()) &#123;</span><br><span class="line">    <span class="variable">$request</span>-&gt;session()-&gt;flash(<span class="string">&#x27;tab&#x27;</span>, <span class="string">&#x27;2&#x27;</span>);   <span class="comment">//闪存信息到session</span></span><br><span class="line">    <span class="keyword">return</span> redirect()</span><br><span class="line">        -&gt;back()</span><br><span class="line">        -&gt;withErrors(<span class="variable">$validator</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>*如果显示错误想变成中文，可以<code>resource/lang/</code>下新建一个文件夹<code>/zh</code>，将en下的文件复制到这里面，然后参考<a target="_blank" rel="noopener" href="https://gist.github.com/linkdesu/994b59c8dc6217dd299a">linkdesu</a>写的复制下来，覆盖到validation。然后在<code>config/app.php</code>里面将<code>locale</code>改为<code>zh</code></p>
<ul>
<li>
<p>laravel的表单验证自带重复确认验证confirmed：</p>
<p>具体用法为：验证字段必须有一个匹配字段<code>foo_confirmation</code>，例如，如果验证字段是<code>password</code>，必须输入一个与之匹配的<code>password_confirmation</code>字段</p>
</li>
<li>
<p>unique:table,column,except,idColumn</p>
<p>此验证规则会在table表（除去idColumn/主键为except的项）中检查column字段中有没有与之重复的值。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;email&#x27;</span> =&gt; <span class="string">&#x27;unique:users,email_address,&#x27;</span>.<span class="variable">$user</span>-&gt;id.<span class="string">&#x27;,user_id&#x27;</span>,</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="修改文章"><a class="markdownIt-Anchor" href="#修改文章"></a> 修改文章</h3>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">update</span>(<span class="params">Post <span class="variable">$post</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$post</span>-&gt;title = request(<span class="string">&#x27;title&#x27;</span>);</span><br><span class="line">        <span class="variable">$post</span>-&gt;content = request(<span class="string">&#x27;content&#x27;</span>);</span><br><span class="line">        <span class="variable">$post</span>-&gt;save();</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&quot;posts/<span class="subst">$post</span>-&gt;id&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="删除文章"><a class="markdownIt-Anchor" href="#删除文章"></a> 删除文章</h3>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">delete</span>(<span class="params">Post <span class="variable">$post</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        post-&gt;delete();</span><br><span class="line">        <span class="keyword">return</span> view(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="auth门脸类"><a class="markdownIt-Anchor" href="#auth门脸类"></a> Auth门脸类</h2>
<h3 id="配置流程"><a class="markdownIt-Anchor" href="#配置流程"></a> 配置流程</h3>
<ul>
<li>
<p>将所要应用Auth的模型（比如User这个model）继承 Authenticate</p>
</li>
<li>
<p>具体在<code>config/auth</code>里面修改</p>
</li>
<li>
<p>方法</p>
<ul>
<li>
<p>登录</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(Auth::attempt([<span class="string">&#x27;email&#x27;</span>=&gt;<span class="variable">$email</span>,<span class="string">&#x27;password&#x27;</span>=&gt;<span class="variable">$password</span>],<span class="variable">$remember</span>))</span><br><span class="line"> &#123;</span><br><span class="line">     <span class="comment">//此数组会和对应模型的数据库进行匹配,匹配正确会进入到此分支语句中</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>登出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Auth::logout();</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>获取当前已通过认证的用户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$user = Auth::user()</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>获取当前已认证用户的id</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$id</span> = Auth::id();</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="policy策略类用于权限验证"><a class="markdownIt-Anchor" href="#policy策略类用于权限验证"></a> Policy策略类(用于权限验证)</h2>
<h3 id="创建"><a class="markdownIt-Anchor" href="#创建"></a> 创建</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:policy Postpolicy</span><br></pre></td></tr></table></figure>
<h3 id="引入模型添加方法"><a class="markdownIt-Anchor" href="#引入模型添加方法"></a> 引入模型，添加方法</h3>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Post</span>；  //文章</span><br><span class="line"><span class="title">use</span> <span class="title">App</span>\<span class="title">User</span>;	<span class="comment">//用户</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//修改权限</span></span><br><span class="line"><span class="comment">//判断用户的id和文章的id是否相等，相等返回true，不相等返回false</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span>  <span class="title">update</span>(<span class="params">User <span class="variable">$user</span>,Post <span class="variable">$post</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="variable">$user</span>-&gt;id == <span class="variable">$post</span>-&gt;user_id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="将策略类和模型关联起来"><a class="markdownIt-Anchor" href="#将策略类和模型关联起来"></a> 将策略类和模型关联起来</h3>
<p>在<code>app/Policies/AuthServiceProvideer.php</code>里</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="variable">$policies</span> = [</span><br><span class="line">       <span class="comment">//&#x27;App\Model&#x27; =&gt; &#x27;App\Policies\ModelPolicy&#x27;,</span></span><br><span class="line">       <span class="string">&#x27;App\Post&#x27;</span> =&gt; <span class="string">&#x27;App\Policies\PostPolicy&#x27;</span>,</span><br><span class="line">   ];</span><br></pre></td></tr></table></figure>
<h3 id="策略判断"><a class="markdownIt-Anchor" href="#策略判断"></a> 策略判断</h3>
<ul>
<li>
<p>在要进行权限验证的控制器的方法里写</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">$this</span>-&gt;authorize(<span class="string">&#x27;update&#x27;</span>,<span class="variable">$post</span>);</span><br></pre></td></tr></table></figure>
<p>此时会获取登录的用户<code>Auth::user()</code>来判断是否有权限，如果通过权限验证会继续，不通过会返回错误页面</p>
<p>也可以这样：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="variable">$user</span>-&gt;can(<span class="string">&#x27;update&#x27;</span>,<span class="variable">$post</span>))&#123;</span><br><span class="line">    ***************</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果有权限更新，会继续进行，否则，会报错</p>
</li>
<li>
<p>在要进行权限验证的blade模板里面写</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@can(<span class="string">&#x27;update&#x27;</span>,<span class="variable">$post</span>)</span><br><span class="line">	*****************</span><br><span class="line">@endcan</span><br></pre></td></tr></table></figure>
<p>此时会获取登录的用户<code>Auth::user()</code>来判断是否有权限</p>
</li>
</ul>
<h2 id="辅助类"><a class="markdownIt-Anchor" href="#辅助类"></a> 辅助类</h2>
<h3 id="文件上传"><a class="markdownIt-Anchor" href="#文件上传"></a> 文件上传</h3>
<h4 id="建立软连接"><a class="markdownIt-Anchor" href="#建立软连接"></a> 建立软连接</h4>
<p>首先建立 <code>storage/app/public -&gt; public/storage</code> 的符号软连接:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan storage:link</span><br></pre></td></tr></table></figure>
<h4 id="存储文件"><a class="markdownIt-Anchor" href="#存储文件"></a> 存储文件</h4>
<p>在存储文件时，就可以写：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//$path = $request-&gt;file(&#x27;image&#x27;)-&gt;storage(&#x27;文件夹名&#x27;,&#x27;存储磁盘&#x27;);</span></span><br><span class="line"><span class="comment">//若希望文件可以被访问，需要放在public磁盘下</span></span><br><span class="line"><span class="variable">$path</span> = <span class="variable">$request</span>-&gt;file(<span class="string">&#x27;image&#x27;</span>)-&gt;storage(<span class="string">&#x27;image&#x27;</span>,<span class="string">&#x27;public&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>具体配置在<code>config/filesystem.php</code>里面修改</p>
<h4 id="访问上传的图片"><a class="markdownIt-Anchor" href="#访问上传的图片"></a> 访问上传的图片</h4>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;asset(&#x27;storage&#x27;)&#125;&#125;/&#123;&#123;$item-&gt;img&#125;&#125;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="flashsession"><a class="markdownIt-Anchor" href="#flashsession"></a> flash—session</h3>
<p>有时候你仅想在下一个请求之前在 Session 中存入数据，你可以使用 flash 方法。使用这个方法保存在 session 中的数据，只会保留到下个 HTTP 请求到来之前，然后就会被删除。闪存数据主要用于短期的状态消息：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$request</span>-&gt;session()-&gt;flash(<span class="string">&#x27;success&#x27;</span>,<span class="string">&quot;更新商品【<span class="subst">&#123;$request-&gt;name&#125;</span>】成功！&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>在前端页面可以这样写（bootstrap）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@if(session(&#x27;success&#x27;))</span><br><span class="line">    &lt;div class=&quot;alert alert-success alert-dismissable&quot;&gt;</span><br><span class="line">        &lt;button aria-hidden=&quot;true&quot; data-dismiss=&quot;alert&quot; class=&quot;close&quot; type=&quot;button&quot;&gt;×&lt;/button&gt;</span><br><span class="line">        &#123;&#123;session(&#x27;success&#x27;)&#125;&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">@endif</span><br></pre></td></tr></table></figure>
<h2 id="其他"><a class="markdownIt-Anchor" href="#其他"></a> 其他</h2>
<h3 id="修改时区"><a class="markdownIt-Anchor" href="#修改时区"></a> 修改时区</h3>
<p>在\App\config\app.php  里修改 <code>timezone =&gt;'Aisa/Shanghai'</code></p>
<h3 id="修改时间格式"><a class="markdownIt-Anchor" href="#修改时间格式"></a> 修改时间格式：</h3>
<p>$post-&gt;created_at-&gt;toFormattedDateString()</p>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/laravel/">laravel</a><a class="link-muted mr-2" rel="tag" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2018/07/16/%E7%A7%BB%E5%8A%A8web%E5%BC%80%E5%8F%91%E4%B9%8Brem/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">移动Web开发之rem</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2018/05/16/laravel%E4%B8%8A%E4%BC%A0%E7%9A%84%E5%9B%BE%E7%89%87%E6%97%A0%E6%B3%95%E6%89%93%E5%BC%80%EF%BC%8C%E6%8A%A5%E9%94%99unable-to-guess-the-mime-type-as-no-guessers-are-available/"><span class="level-item">laravel上传的图片无法打开，报错Unable to guess the mime type as no guessers are available</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="valine-thread"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/valine/1.4.14/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread' ,
            appId: "gSrIuSMF0CeWFLNM3mh6pPDT-gzGzoHsz",
            appKey: "mRMCdUc1FJMgDsQ4NMIqtc2H",
            
            avatar: "mm",
            
            meta: ["nick","mail","link"],
            pageSize: 10,
            lang: "zh-CN",
            visitor: true,
            highlight: true,
            
            
            
            
            
            requiredFields: [],
        });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://static.huhuapin.cn/uploads/2017/08/logo1.jpg" alt="胡华聘的个人博客"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">胡华聘的个人博客</p><p class="is-size-6 is-block">欢迎访问</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">23</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">11</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">33</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/huhuapin" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/huhuapin"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="CSDN" href="https://blog.csdn.net/qq867840692"><i class="fa fa-cube"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:867840692@qq.com"><i class="fas fa-envelope"></i></a></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://oxyzhg.cn/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Oxyzhg</span></span><span class="level-right"><span class="level-item tag">oxyzhg.cn</span></span></a></li><li><a class="level is-mobile" href="https://gaojiajun.cn/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">adcdGjj</span></span><span class="level-right"><span class="level-item tag">gaojiajun.cn</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Mysql/"><span class="level-start"><span class="level-item">Mysql</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/PHP/"><span class="level-start"><span class="level-item">PHP</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/python/"><span class="level-start"><span class="level-item">python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/uncategorized/"><span class="level-start"><span class="level-item">uncategorized</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/wordpress/"><span class="level-start"><span class="level-item">wordpress</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/"><span class="level-start"><span class="level-item">前端</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="level-start"><span class="level-item">数据结构</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%97%B6%E5%BA%8F/"><span class="level-start"><span class="level-item">时序</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97/"><span class="level-start"><span class="level-item">时间序列</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"><span class="level-start"><span class="level-item">服务器</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%9A%8F%E7%AC%94/"><span class="level-start"><span class="level-item">随笔</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#安装"><span class="level-left"><span class="level-item">1</span><span class="level-item"> 安装</span></span></a></li><li><a class="level is-mobile" href="#路由"><span class="level-left"><span class="level-item">2</span><span class="level-item"> 路由</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#基本形式"><span class="level-left"><span class="level-item">2.1</span><span class="level-item"> 基本形式 ：</span></span></a></li><li><a class="level is-mobile" href="#路由参数"><span class="level-left"><span class="level-item">2.2</span><span class="level-item"> 路由参数：</span></span></a></li><li><a class="level is-mobile" href="#路由分组"><span class="level-left"><span class="level-item">2.3</span><span class="level-item"> 路由分组：</span></span></a></li></ul></li><li><a class="level is-mobile" href="#渲染"><span class="level-left"><span class="level-item">3</span><span class="level-item"> 渲染</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#基本与ci相似"><span class="level-left"><span class="level-item">3.1</span><span class="level-item"> 基本与CI相似</span></span></a></li></ul></li><li><a class="level is-mobile" href="#blade模板"><span class="level-left"><span class="level-item">4</span><span class="level-item"> blade模板</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#if语句"><span class="level-left"><span class="level-item">4.1</span><span class="level-item"> if语句</span></span></a></li><li><a class="level is-mobile" href="#循环"><span class="level-left"><span class="level-item">4.2</span><span class="level-item"> 循环</span></span></a></li><li><a class="level is-mobile" href="#引用与调用"><span class="level-left"><span class="level-item">4.3</span><span class="level-item"> 引用与调用</span></span></a></li><li><a class="level is-mobile" href="#渲染为html-content"><span class="level-left"><span class="level-item">4.4</span><span class="level-item"> 渲染为html   {!! $content !!}</span></span></a></li></ul></li><li><a class="level is-mobile" href="#migration"><span class="level-left"><span class="level-item">5</span><span class="level-item"> migration</span></span></a></li><li><a class="level is-mobile" href="#文章模型"><span class="level-left"><span class="level-item">6</span><span class="level-item"> 文章模型</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#创建模型"><span class="level-left"><span class="level-item">6.1</span><span class="level-item"> 创建模型</span></span></a></li><li><a class="level is-mobile" href="#默认行为"><span class="level-left"><span class="level-item">6.2</span><span class="level-item"> 默认行为</span></span></a></li><li><a class="level is-mobile" href="#在控制器使用模型"><span class="level-left"><span class="level-item">6.3</span><span class="level-item"> 在控制器使用模型</span></span></a></li><li><a class="level is-mobile" href="#模型关联"><span class="level-left"><span class="level-item">6.4</span><span class="level-item"> 模型关联</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#belongsto"><span class="level-left"><span class="level-item">6.4.1</span><span class="level-item"> belongsTo</span></span></a></li><li><a class="level is-mobile" href="#hasmany"><span class="level-left"><span class="level-item">6.4.2</span><span class="level-item"> hasMany</span></span></a></li><li><a class="level is-mobile" href="#belongstomany"><span class="level-left"><span class="level-item">6.4.3</span><span class="level-item"> belongsTomany</span></span></a></li><li><a class="level is-mobile" href="#数据填充"><span class="level-left"><span class="level-item">6.4.4</span><span class="level-item"> 数据填充</span></span></a></li><li><a class="level is-mobile" href="#简单分页"><span class="level-left"><span class="level-item">6.4.5</span><span class="level-item"> 简单分页</span></span></a></li><li><a class="level is-mobile" href="#字符截断"><span class="level-left"><span class="level-item">6.4.6</span><span class="level-item"> 字符截断</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#文章的增删改查"><span class="level-left"><span class="level-item">7</span><span class="level-item"> 文章的增删改查</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#文章详情页"><span class="level-left"><span class="level-item">7.1</span><span class="level-item"> 文章详情页</span></span></a></li><li><a class="level is-mobile" href="#创建文章"><span class="level-left"><span class="level-item">7.2</span><span class="level-item"> 创建文章</span></span></a></li><li><a class="level is-mobile" href="#修改文章"><span class="level-left"><span class="level-item">7.3</span><span class="level-item"> 修改文章</span></span></a></li><li><a class="level is-mobile" href="#删除文章"><span class="level-left"><span class="level-item">7.4</span><span class="level-item"> 删除文章</span></span></a></li></ul></li><li><a class="level is-mobile" href="#auth门脸类"><span class="level-left"><span class="level-item">8</span><span class="level-item"> Auth门脸类</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#配置流程"><span class="level-left"><span class="level-item">8.1</span><span class="level-item"> 配置流程</span></span></a></li></ul></li><li><a class="level is-mobile" href="#policy策略类用于权限验证"><span class="level-left"><span class="level-item">9</span><span class="level-item"> Policy策略类(用于权限验证)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#创建"><span class="level-left"><span class="level-item">9.1</span><span class="level-item"> 创建</span></span></a></li><li><a class="level is-mobile" href="#引入模型添加方法"><span class="level-left"><span class="level-item">9.2</span><span class="level-item"> 引入模型，添加方法</span></span></a></li><li><a class="level is-mobile" href="#将策略类和模型关联起来"><span class="level-left"><span class="level-item">9.3</span><span class="level-item"> 将策略类和模型关联起来</span></span></a></li><li><a class="level is-mobile" href="#策略判断"><span class="level-left"><span class="level-item">9.4</span><span class="level-item"> 策略判断</span></span></a></li></ul></li><li><a class="level is-mobile" href="#辅助类"><span class="level-left"><span class="level-item">10</span><span class="level-item"> 辅助类</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#文件上传"><span class="level-left"><span class="level-item">10.1</span><span class="level-item"> 文件上传</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#建立软连接"><span class="level-left"><span class="level-item">10.1.1</span><span class="level-item"> 建立软连接</span></span></a></li><li><a class="level is-mobile" href="#存储文件"><span class="level-left"><span class="level-item">10.1.2</span><span class="level-item"> 存储文件</span></span></a></li><li><a class="level is-mobile" href="#访问上传的图片"><span class="level-left"><span class="level-item">10.1.3</span><span class="level-item"> 访问上传的图片</span></span></a></li></ul></li><li><a class="level is-mobile" href="#flashsession"><span class="level-left"><span class="level-item">10.2</span><span class="level-item"> flash—session</span></span></a></li></ul></li><li><a class="level is-mobile" href="#其他"><span class="level-left"><span class="level-item">11</span><span class="level-item"> 其他</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#修改时区"><span class="level-left"><span class="level-item">11.1</span><span class="level-item"> 修改时区</span></span></a></li><li><a class="level is-mobile" href="#修改时间格式"><span class="level-left"><span class="level-item">11.2</span><span class="level-item"> 修改时间格式：</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-03-14T06:26:26.000Z">2022-03-14</time></p><p class="title"><a href="/2022/03/14/python-selenium/">使用python+selenium爬取抖音数据</a></p><p class="categories"><a href="/categories/python/">python</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-10-29T08:04:25.000Z">2021-10-29</time></p><p class="title"><a href="/2021/10/29/kettle-problems/">使用kettle遇到的一些问题</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-07-12T14:08:00.000Z">2021-07-12</time></p><p class="title"><a href="/2021/07/12/article-read/">论文阅读总结</a></p><p class="categories"><a href="/categories/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97/">时间序列</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-06-26T17:00:00.000Z">2021-06-27</time></p><p class="title"><a href="/2021/06/27/time-series-anomalies-detection/">异常检测综述</a></p><p class="categories"><a href="/categories/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97/">时间序列</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-06-14T03:17:47.000Z">2021-06-14</time></p><p class="title"><a href="/2021/06/14/2021-06-easy/">2021-06-随笔</a></p><p class="categories"><a href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://static.huhuapin.cn/uploads/2017/08/logo1.jpg" alt="胡华聘的个人博客" height="28"></a><p class="is-size-7"><span>&copy; 2022 胡华聘</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><a href="http://beian.miit.gov.cn" target="_blank" rel="noopener">鲁ICP备17033420号</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="CSDN" href="https://blog.csdn.net/qq867840692"><i class="fab fa-cube"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="GitHub" href="https://github.com/huhuapin"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>