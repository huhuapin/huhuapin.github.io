<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>异常检测综述 - 胡华聘的个人博客</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="胡华聘的个人博客"><meta name="msapplication-TileImage" content="https://static.huhuapin.cn/uploads/2017/08/cropped-u2426278734153718334fm11gp0-32x32.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="胡华聘的个人博客"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="定义 ​		时序异常检测通常形式化为根据某种标准或正常信号寻找离群数据点。有很多异常类型，从商业角度来说最重要的类型，包括意料之外的峰谷、趋势变动、水平变化。 ​		基本上，异常检测算法要么将每个时间点标记为异常&amp;#x2F;非异常，要么预测某一点的信号，并测试这一点的值和预测值的偏离程度，以认定异常。  异常分类   innovational outlier (IO):造成离群点干扰不仅作用于X(T)，而"><meta property="og:type" content="blog"><meta property="og:title" content="异常检测综述"><meta property="og:url" content="https://www.huhuapin.cn/2021/06/27/time-series-anomalies-detection/"><meta property="og:site_name" content="胡华聘的个人博客"><meta property="og:description" content="定义 ​		时序异常检测通常形式化为根据某种标准或正常信号寻找离群数据点。有很多异常类型，从商业角度来说最重要的类型，包括意料之外的峰谷、趋势变动、水平变化。 ​		基本上，异常检测算法要么将每个时间点标记为异常&amp;#x2F;非异常，要么预测某一点的信号，并测试这一点的值和预测值的偏离程度，以认定异常。  异常分类   innovational outlier (IO):造成离群点干扰不仅作用于X(T)，而"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://static.huhuapin.cn/uploads/2021/06/annoly.png"><meta property="og:image" content="https://static.huhuapin.cn/uploads/2021/06/image-20210616213836249.png"><meta property="og:image" content="https://static.huhuapin.cn/uploads/2021/06/stl%E5%88%86%E8%A7%A3.png"><meta property="og:image" content="https://static.huhuapin.cn/uploads/2021/06/image-20210625201137943.png"><meta property="og:image" content="https://static.huhuapin.cn/uploads/2021/06/image-20210625214038923.png"><meta property="og:image" content="https://static.huhuapin.cn/uploads/2021/06/image-20210625214637113.png"><meta property="og:image" content="https://static.huhuapin.cn/uploads/2021/06/image-20210625220920028.png"><meta property="og:image" content="https://img-blog.csdn.net/20160618150545625"><meta property="og:image" content="https://img-blog.csdn.net/20160618160343957"><meta property="og:image" content="https://img-blog.csdn.net/20160618165048971"><meta property="og:image" content="https://static.huhuapin.cn/uploads/2021/06/20200327224926140.png"><meta property="og:image" content="https://static.huhuapin.cn/uploads/2021/06/20200327234618538.png"><meta property="og:image" content="https://static.huhuapin.cn/uploads/2021/06/2020032800055722.png"><meta property="og:image" content="https://static.huhuapin.cn/uploads/2021/06/20200328001754275.png"><meta property="og:image" content="https://static.huhuapin.cn/uploads/2021/06/20200328002339343.png"><meta property="og:image" content="https://static.huhuapin.cn/uploads/2021/06/Outlier%20Detection%20for%20Multidimensional%20Time%20Series.jpg"><meta property="og:image" content="https://www.zhihu.com/equation?tex=J_%7Bj%7D%5E%7Ben%7D%3DJ_%7Bj%7D%5E%7Bde%7D"><meta property="article:published_time" content="2021-06-26T17:00:00.000Z"><meta property="article:modified_time" content="2021-06-26T17:47:00.608Z"><meta property="article:author" content="胡华聘"><meta property="article:tag" content="时序"><meta property="article:tag" content="异常检测"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://static.huhuapin.cn/uploads/2021/06/annoly.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.huhuapin.cn/2021/06/27/time-series-anomalies-detection/"},"headline":"异常检测综述","image":["https://static.huhuapin.cn/uploads/2021/06/annoly.png","https://static.huhuapin.cn/uploads/2021/06/image-20210616213836249.png","https://static.huhuapin.cn/uploads/2021/06/stl%E5%88%86%E8%A7%A3.png","https://static.huhuapin.cn/uploads/2021/06/image-20210625201137943.png","https://static.huhuapin.cn/uploads/2021/06/image-20210625214038923.png","https://static.huhuapin.cn/uploads/2021/06/image-20210625214637113.png","https://static.huhuapin.cn/uploads/2021/06/image-20210625220920028.png","https://static.huhuapin.cn/uploads/2021/06/20200327224926140.png","https://static.huhuapin.cn/uploads/2021/06/20200327234618538.png","https://static.huhuapin.cn/uploads/2021/06/2020032800055722.png","https://static.huhuapin.cn/uploads/2021/06/20200328001754275.png","https://static.huhuapin.cn/uploads/2021/06/20200328002339343.png","https://static.huhuapin.cn/uploads/2021/06/Outlier%20Detection%20for%20Multidimensional%20Time%20Series.jpg"],"datePublished":"2021-06-26T17:00:00.000Z","dateModified":"2021-06-26T17:47:00.608Z","author":{"@type":"Person","name":"胡华聘"},"publisher":{"@type":"Organization","name":"胡华聘的个人博客","logo":{"@type":"ImageObject","url":"https://static.huhuapin.cn/uploads/2017/08/logo1.jpg"}},"description":"定义 ​\t\t时序异常检测通常形式化为根据某种标准或正常信号寻找离群数据点。有很多异常类型，从商业角度来说最重要的类型，包括意料之外的峰谷、趋势变动、水平变化。 ​\t\t基本上，异常检测算法要么将每个时间点标记为异常&#x2F;非异常，要么预测某一点的信号，并测试这一点的值和预测值的偏离程度，以认定异常。  异常分类   innovational outlier (IO):造成离群点干扰不仅作用于X(T)，而"}</script><link rel="canonical" href="https://www.huhuapin.cn/2021/06/27/time-series-anomalies-detection/"><link rel="icon" href="https://static.huhuapin.cn/uploads/2017/08/cropped-u2426278734153718334fm11gp0-32x32.jpg"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.15.2/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link href="https://cdn.bootcss.com/KaTeX/0.7.1/katex.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-DE8QBXRKGH" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-DE8QBXRKGH');</script><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://static.huhuapin.cn/uploads/2017/08/logo1.jpg" alt="胡华聘的个人博客" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">时间轴</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="GitHub" href="https://github.com/huhuapin"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-06-26T17:00:00.000Z" title="2021/6/27 01:00:00">2021-06-27</time>发表</span><span class="level-item"><time dateTime="2021-06-26T17:47:00.608Z" title="2021/6/27 01:47:00">2021-06-27</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97/">时间序列</a></span><span class="level-item">19 分钟读完 (大约2903个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">异常检测综述</h1><div class="content"><h2 id="定义"><a class="markdownIt-Anchor" href="#定义"></a> 定义</h2>
<p>​		时序异常检测通常形式化为<strong>根据某种标准或正常信号寻找离群数据点</strong>。有很多异常类型，从商业角度来说最重要的类型，包括意料之外的峰谷、趋势变动、水平变化。</p>
<p>​		基本上，异常检测算法要么将每个时间点标记为<strong>异常/非异常</strong>，要么预测某一点的信号，并测试这一点的值和预测值的偏离程度，以认定异常。</p>
<h2 id="异常分类"><a class="markdownIt-Anchor" href="#异常分类"></a> 异常分类</h2>
<ul>
<li>
<p>innovational outlier (IO):造成离群点干扰不仅作用于X(T)，而且影响T时刻以后序列的所有观察值。</p>
</li>
<li>
<p>additive outlier (AO):造成这种离群点的干扰，只影响该干扰发生的那一个时刻T上的序列值，而不影响该时刻以后的序列值。</p>
</li>
<li>
<p>level shift (LS):造成这种离群点的干扰是在某一时刻T，系统的结构发生了变化，并持续影响T时刻以后的所有行为，在数列上往往表现出T时刻前后的序列均值发生水平位移。</p>
</li>
<li>
<p>temporary change (TC)：造成这种离群点的干扰是在T时刻干扰发生时具有一定初始效应，以后随时间根据衰减因子的大小呈指数衰减。</p>
<span id="more"></span>
<p><img src="https://static.huhuapin.cn/uploads/2021/06/annoly.png" alt="Anomaly" /></p>
<h2 id="常见方法"><a class="markdownIt-Anchor" href="#常见方法"></a> 常见方法</h2>
<p><img src="https://static.huhuapin.cn/uploads/2021/06/image-20210616213836249.png" alt="时序异常检测方法" /></p>
</li>
</ul>
<h3 id="stl分解统计方法"><a class="markdownIt-Anchor" href="#stl分解统计方法"></a> STL分解（统计方法）</h3>
<p>​		STL(Seasonal and Trend decomposition using Loess )是以鲁棒局部加权回归作为平滑方法的时间序列分解方法。</p>
<p>​		存在季节性因素的时间序列数据可以被分解为趋势因子(Trend)、季节性因子(Seasonal)、和随机因子/残差(Irregular)。此时可以通过相加模型或者相乘模型来分解数据。</p>
<ul>
<li>相加模型：Y<sub>t</sub> = Trend<sub>t</sub> + Seasonal<sub>t</sub> + Irregular<sub>t</sub></li>
<li>相乘模型：Y<sub>t</sub> = Trend<sub>t</sub> x Seasonal<sub>t</sub> x Irregular<sub>t</sub></li>
</ul>
<p>在R中，<code>stl()</code>可以很好的处理相加模型，至于相乘模型，仅需要进行一下对数变换就可以转化为相加模型了。</p>
<p><img src="https://static.huhuapin.cn/uploads/2021/06/stl%E5%88%86%E8%A7%A3.png" alt="stl分解" /></p>
<p>​		数据如果有异常，都会体现在残差数据集中。我们怎么从残差数据中早出有问题的数据时间点呢？</p>
<p>​		我们可以利用3-sigma原则：当残差数据近似正态分布时，我们计算出残差数据集的标准差，如果数据点与均值的差值在3倍标准差以外，则认为是异常点。</p>
<h3 id="arima统计方法"><a class="markdownIt-Anchor" href="#arima统计方法"></a> ARIMA（统计方法）</h3>
<p>​		自回归移动平均模型（ARIMA）是一种非常强大的时间序列拟合模型，它可以对非平稳的无季节效应的时间序列进行拟合和预测。</p>
<h4 id="ar模型"><a class="markdownIt-Anchor" href="#ar模型"></a> AR模型</h4>
<p>AR模型（Autoregressive model）即自回归模型，用同一变数x之前各期，即x<sub>t-p</sub>至x<sub>t-1</sub>来预测本期x<sub>t</sub>的表现，并假设它们为一线性关系.</p>
<ul>
<li>描述<strong>当前值与历史值之间的关系</strong>，<strong>用变量自身的历史时间数据对自身进行预测</strong></li>
<li>AR§模型结构：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mrow><mi>t</mi></mrow></msub><mo>=</mo><msub><mi>ϕ</mi><mrow><mn>0</mn></mrow></msub><mo>+</mo><msub><mi>ϕ</mi><mrow><mn>1</mn></mrow></msub><msub><mi>x</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>ϕ</mi><mrow><mn>2</mn></mrow></msub><msub><mi>x</mi><mrow><mi>t</mi><mo>−</mo><mn>2</mn></mrow></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>ϕ</mi><mrow><mrow><mi mathvariant="normal">p</mi></mrow></mrow></msub><msub><mi>x</mi><mrow><mi>t</mi><mo>−</mo><mi>p</mi></mrow></msub><mo>+</mo><msub><mi>ε</mi><mrow><mi>t</mi></mrow></msub></mrow><annotation encoding="application/x-tex">x_{t}=\phi_{0}+\phi_{1} x_{t-1}+\phi_{2} x_{t-2}+\cdots+\phi_{\mathrm{p}} x_{t-p}+\varepsilon_{t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">ϕ</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">0</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit">ϕ</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">−</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit">ϕ</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">−</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">+</span><span class="minner">⋯</span><span class="mbin">+</span><span class="mord"><span class="mord mathit">ϕ</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">p</span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">−</span><span class="mord mathit">p</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit">ε</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span></li>
<li>PACF，偏自相关函数（决定p值）</li>
</ul>
<h4 id="ma模型"><a class="markdownIt-Anchor" href="#ma模型"></a> MA模型</h4>
<p>MA模型（moving average model），即移动平均模型，序列当前时刻的时序值是过去q阶白噪声的线性组合</p>
<ul>
<li>移动平均模型关注的是<strong>自回归模型中的误差项的累加，移动平均法能有效地消除预测中的随机波动</strong></li>
<li>MA(q)模型结构：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mrow><mi>t</mi></mrow></msub><mo>=</mo><mi>μ</mi><mo>+</mo><msub><mi>ε</mi><mrow><mi>t</mi></mrow></msub><mo>−</mo><msub><mi>θ</mi><mrow><mn>1</mn></mrow></msub><msub><mi>ε</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>−</mo><msub><mi>θ</mi><mrow><mn>2</mn></mrow></msub><msub><mi>ε</mi><mrow><mi>t</mi><mo>−</mo><mn>2</mn></mrow></msub><mo>−</mo><mo>⋯</mo><mo>−</mo><msub><mi>θ</mi><mrow><mi>q</mi></mrow></msub><msub><mi>ε</mi><mrow><mi>t</mi><mo>−</mo><mi>q</mi></mrow></msub></mrow><annotation encoding="application/x-tex">x_{t}=\mu+\varepsilon_{t}-\theta_{1} \varepsilon_{t-1}-\theta_{2} \varepsilon_{t-2}-\cdots-\theta_{q} \varepsilon_{t-q}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">=</span><span class="mord mathit">μ</span><span class="mbin">+</span><span class="mord"><span class="mord mathit">ε</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">−</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">θ</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">ε</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">−</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">−</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">θ</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">ε</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">−</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">−</span><span class="minner">⋯</span><span class="mbin">−</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">θ</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">q</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">ε</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">−</span><span class="mord mathit" style="margin-right:0.03588em;">q</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span></li>
<li>ACF，自相关函数（决定q值）</li>
</ul>
<h4 id="arma模型"><a class="markdownIt-Anchor" href="#arma模型"></a> ARMA模型</h4>
<p>​		ARMA模型就是二者的结合，是目前最常用的<strong>平稳序列</strong>拟合和预测模型。</p>
<ul>
<li>ARMA(p,q)模型结构：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mrow><mi>t</mi></mrow></msub><mo>=</mo><msub><mi>ϕ</mi><mrow><mn>0</mn></mrow></msub><mo>+</mo><msub><mi>ϕ</mi><mrow><mn>1</mn></mrow></msub><msub><mi>x</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>ϕ</mi><mrow><mi>p</mi></mrow></msub><msub><mi>x</mi><mrow><mi>t</mi><mo>−</mo><mi>p</mi></mrow></msub><mo>+</mo><msub><mi>ε</mi><mrow><mi>t</mi></mrow></msub><mo>−</mo><msub><mi>θ</mi><mrow><mn>1</mn></mrow></msub><msub><mi>ε</mi><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>−</mo><mo>⋯</mo><mo>−</mo><msub><mi>θ</mi><mrow><mi>q</mi></mrow></msub><msub><mi>ε</mi><mrow><mi>t</mi><mo>−</mo><mi>q</mi></mrow></msub></mrow><annotation encoding="application/x-tex">x_{t}=\phi_{0}+\phi_{1} x_{t-1}+\cdots+\phi_{p} x_{t-p}+\varepsilon_{t}-\theta_{1} \varepsilon_{t-1}-\cdots-\theta_{q} \varepsilon_{t-q}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit">ϕ</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">0</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit">ϕ</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">−</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">+</span><span class="minner">⋯</span><span class="mbin">+</span><span class="mord"><span class="mord mathit">ϕ</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">p</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">−</span><span class="mord mathit">p</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">+</span><span class="mord"><span class="mord mathit">ε</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">−</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">θ</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">ε</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">−</span><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">−</span><span class="minner">⋯</span><span class="mbin">−</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">θ</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03588em;">q</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord"><span class="mord mathit">ε</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span><span class="mbin">−</span><span class="mord mathit" style="margin-right:0.03588em;">q</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span></li>
</ul>
<h4 id="arima模型"><a class="markdownIt-Anchor" href="#arima模型"></a> ARIMA模型</h4>
<p>​		ARMA模型只适用于平稳性序列，那么如何拟合非平稳序列呢？</p>
<p>​		差分运算具有强大的确定性信息提取能力，许多非平稳序列差分后会显示出平稳序列的性质。</p>
<p>​		根据这个特点，我们就可以将非平稳序列进行差分运算后变为平稳序列，在用ARMA模型拟合。这就是ARIMA模型（Autoregressive Integrated Moving Average model），即自回归差分移动平均模型。</p>
<p>​		ARIMA共有三个参数，p,d,q。可分别根据PACF、差分运算、ACF得到。</p>
<p>建模步骤：</p>
<p><img src="https://static.huhuapin.cn/uploads/2021/06/image-20210625201137943.png" alt="ARIMA建模步骤" /></p>
<p>在R中，<code>arima(ts,order=c(p,d,q))</code>,forecast包中有一个函数<code>auto.arima(ts)</code>可以实现最优ARIMA模型的自动选取</p>
<p><img src="https://static.huhuapin.cn/uploads/2021/06/image-20210625214038923.png" alt="Arima" /></p>
<p><img src="https://static.huhuapin.cn/uploads/2021/06/image-20210625214637113.png" alt="auto.arima" /></p>
<p>预测:<code>forecast(fit,n)</code>，fit为拟合模型,n为向后预测的时间点个数。一般向后预测越多，结果越不准确。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;forecast(fit,<span class="number">3</span>)</span><br><span class="line">     Point Forecast    Lo <span class="number">80</span>     Hi <span class="number">80</span>    Lo <span class="number">95</span>    Hi <span class="number">95</span></span><br><span class="line"><span class="number">1971</span>       <span class="number">816.1813</span> <span class="number">634.1427</span>  <span class="number">998.2199</span> <span class="number">537.7773</span> <span class="number">1094.585</span></span><br><span class="line"><span class="number">1972</span>       <span class="number">835.5596</span> <span class="number">640.8057</span> <span class="number">1030.3136</span> <span class="number">537.7091</span> <span class="number">1133.410</span></span><br><span class="line"><span class="number">1973</span>       <span class="number">840.4889</span> <span class="number">641.5646</span> <span class="number">1039.4132</span> <span class="number">536.2604</span> <span class="number">1144.717</span></span><br><span class="line">&gt; plot(forecast(fit,<span class="number">3</span>),xlab=<span class="string">&quot;年份&quot;</span>,ylab=<span class="string">&quot;流量&quot;</span>)</span><br><span class="line">&gt; </span><br></pre></td></tr></table></figure>
<p><img src="https://static.huhuapin.cn/uploads/2021/06/image-20210625220920028.png" alt="forecast" /></p>
<p>深灰色表示80%的置信区间，浅灰色表示90%的置信区间。</p>
<p>异常检测就可以将预测结果和实际结果进行比较，如果实际值在置信区间外，可以认定为异常。</p>
<p>至于带季节性的非平稳序列，可以通过STL分解得到残差数据，再对其进行预测。</p>
<p>R中也有简单的实现，只需在<code>arima()</code>中增加一个参数seasonal就可以了。</p>
<blockquote>
<p>使用R中的tsoutliers包可以方便地检测时间序列中的离群值</p>
</blockquote>
<h3 id="lof机器学习方法"><a class="markdownIt-Anchor" href="#lof机器学习方法"></a> LOF（机器学习方法）</h3>
<p><img src="https://img-blog.csdn.net/20160618150545625" alt="LOF" /></p>
<p>​		对于C1集合的点，整体间距，密度，分散情况较为均匀一致，可以认为是同一簇；对于C2集合的点，同样可认为是一簇。o1、o2点相对孤立，可以认为是异常点或离散点。现在的问题是，如何实现算法的通用性，可以满足C1和C2这种密度分散情况迥异的集合的异常点识别。</p>
<h4 id="定义-2"><a class="markdownIt-Anchor" href="#定义-2"></a> 定义</h4>
<ul>
<li>
<p>d(p,o):两点p,o之间的距离</p>
</li>
<li>
<p>k-distance:第k距离</p>
<p>​		对于点p的第k距离d<sub>k</sub>§ = d(p,q)，其中q是距离p第k远的点</p>
<p><img src="https://img-blog.csdn.net/20160618160343957" alt="图3" /></p>
</li>
<li>
<p>第k距离邻域N<sub>K</sub>§，就是p的第k距离即以内的所有点，包括第k距离。</p>
</li>
<li>
<p>reach-distance：可达距离</p>
<p>​		点o到点p的第k可达距离:rech-dist<sub>k</sub>(p,o) = max{d(p,o),d<sub>k</sub>(o)}</p>
<p><img src="https://img-blog.csdn.net/20160618165048971" alt="reach-distance" /></p>
</li>
<li>
<p>local reachability density：局部可达密度</p>
<p>点p的局部可达密度表示为：</p>
\operatorname{lrd}_{k}(p)=1 /\left(\frac{\sum_{o \in N_{k}(p)} r e a c h-\operatorname{dist}_{k}(p, o)}{\left|N_{k}(p)\right|}\right)

<p>​		表示点p的第k邻域内点到p的平均可达距离的倒数。</p>
<p>​		局部可达密度与总体密度类似，只不过是用k距离邻域计算的，所以称为“局部”。如果p是孤立点，那么点o到点p的可达距离会取到o,p的实际距离，这样计算出来结果就要小。</p>
</li>
<li>
<p>local outlier factor：局部离群因子</p>
<p>​		点p的局部离群因子表示为：</p>
L O F_{k}(p)=\frac{\sum_{o \in N_{k}(p)} \frac{\operatorname{lrd}_{k}(o)}{l_{r d_{k}(p)}}}{\left|N_{k}(p)\right|} = \frac{\sum_{o \in N_{k}(p)} l r d_{k}(o)}{\left|N_{k}(p)\right|} / l r d_{k}(p)

<p>​		表示点p的邻域点 Nk§Nk§的局部可达密度与点p的局部可达密度之比的平均数。<br />
​		如果这个比值越接近1，说明p的其邻域点密度差不多，p可能和邻域同属一簇；如果这个比值越小于1，说明p的密度高于其邻域点密度，p为密集点；如果这个比值越大于1，说明p的密度小于其邻域点密度，p越可能是异常点。</p>
</li>
</ul>
<p>在R中使用：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">library(DMwR)</span><br><span class="line">lofactor(df, k = <span class="number">5</span>)</span><br><span class="line"><span class="comment">#使用LOF算法计算局部离群点因子</span></span><br><span class="line"><span class="comment">#df为数据集</span></span><br><span class="line"><span class="comment">#k参数为LOF公式中的k，按照具体情况自行设置。</span></span><br></pre></td></tr></table></figure>
<p>应用到时间序列即不考虑时间前后相关性，以孤立散点进行检测。</p>
<h3 id="lstm"><a class="markdownIt-Anchor" href="#lstm"></a> LSTM</h3>
<p>​		LSTM( long short term memory)即长短记忆神经网络，是为了解决RNN网络只能保留近期信息而设计出来的网络结构，它可以选择性地记住或遗忘历史信息。</p>
<p><img src="https://static.huhuapin.cn/uploads/2021/06/20200327224926140.png" alt="LSTM结构" /></p>
<blockquote>
<p>黄色的框代表神经网络层，是整个网络中非常关键的一部分</p>
</blockquote>
<ul>
<li>X<sub>t</sub>代表输入信息，是一个时间点的全部信息</li>
<li>h<sub>t</sub>代表输出信息</li>
<li>一个绿色框代表一个细胞（cell）,顶部贯穿细胞的横线表示细胞状态，它选择性地保留了历史的输入信息</li>
</ul>
<h4 id="遗忘门"><a class="markdownIt-Anchor" href="#遗忘门"></a> 遗忘门</h4>
<p><img src="https://static.huhuapin.cn/uploads/2021/06/20200327234618538.png" alt="forgetGate" /></p>
<p>​		遗忘门决定遗忘哪些信息，它的作用就是遗忘掉老的不用的旧的信息，遗忘门接收上一时刻输出信息h<sub>t−1</sub></p>
<p>和当前时刻的输入x<sub>t</sub>，然后得到一个遗忘矩阵f<sub>t</sub>来决定遗忘过去信息C<sub>t-1</sub>的哪些部分。</p>
<h4 id="输入门"><a class="markdownIt-Anchor" href="#输入门"></a> 输入门</h4>
<p><img src="https://static.huhuapin.cn/uploads/2021/06/2020032800055722.png" alt="inputGate" /></p>
<p>​		它决定了从新的信息中存储哪些信息到细胞状态中去。即产生要更新的信息。</p>
<p>​		sigmoid 层和tanh层分别接受两个输入，产生i<sub>t</sub>（决定了要更新哪些信息）和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mover accent="true"><mrow><mi>C</mi></mrow><mo>~</mo></mover><mrow><mi>t</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\tilde{C}_{t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9201900000000001em;"></span><span class="strut bottom" style="height:1.07019em;vertical-align:-0.15em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord accent"><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord textstyle cramped"><span class="mord mathit" style="margin-right:0.07153em;">C</span></span></span><span style="top:-0.60233em;margin-left:0.16668em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="accent-body"><span>~</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">t</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>(决定了信息内容)，然后更新细胞状态：</p>
<p><img src="https://static.huhuapin.cn/uploads/2021/06/20200328001754275.png" alt="updateCell" /></p>
<h4 id="输出门"><a class="markdownIt-Anchor" href="#输出门"></a> 输出门</h4>
<p><img src="https://static.huhuapin.cn/uploads/2021/06/20200328002339343.png" alt="outputGate" /></p>
<p>​		首先利用输出门（sigmoid层）产生一个输出矩阵O<sub>t</sub>,决定输出当前状态C<sub>t</sub> 的哪些部分。接着状态C<sub>t</sub>  通过tanh层之后与O<sub>t</sub>  相乘，成为输出的内容h<sub>t</sub></p>
<h4 id="lstm-ae"><a class="markdownIt-Anchor" href="#lstm-ae"></a> LSTM-AE</h4>
<p><img src="https://static.huhuapin.cn/uploads/2021/06/Outlier%20Detection%20for%20Multidimensional%20Time%20Series.jpg" alt="Outlier Detection for Multidimensional Time Series" /></p>
<p>LSTM-AE就是将自编码器的编码和解码部分都用LSTM来代替，既可以实现降维，也可以缩短序列长度，提取信息。</p>
<p>Encoder：结合LSTM的性质， 在任意时刻<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi><mo>(</mo><mi>i</mi><mo>−</mo><mn>4</mn><mo>&lt;</mo><mi>j</mi><mo>&lt;</mo><mi>i</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">j(i-4&lt;j&lt;i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mbin">−</span><span class="mord mathrm">4</span><span class="mrel">&lt;</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">&lt;</span><span class="mord mathit">i</span><span class="mclose">)</span></span></span></span>的隐含状态<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>J</mi><mrow><mi>j</mi></mrow><mrow><mi>e</mi><mi>n</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">J_{j}^{e n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:1.078102em;vertical-align:-0.394772em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="vlist"><span style="top:0.258664em;margin-left:-0.09618em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span></span><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">e</span><span class="mord mathit">n</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>,同时受到当前时刻的输入和过去时刻隐含状态的影响。注意，最终只有i时刻的隐含状态传递给了decoder部分。所以，满足：</p>
<p><img src="https://www.zhihu.com/equation?tex=J_%7Bj%7D%5E%7Ben%7D%3DJ_%7Bj%7D%5E%7Bde%7D" alt="" /></p>
<p>Decoder: 与encoder的过程相反，decoder从i时刻逐一向i-4时刻遍历。所以当前时刻的隐含状态会受到当前时刻和下一个时刻隐含状态的影响</p>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E6%97%B6%E5%BA%8F/">时序</a><a class="link-muted mr-2" rel="tag" href="/tags/%E5%BC%82%E5%B8%B8%E6%A3%80%E6%B5%8B/">异常检测</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/07/12/article-read/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">论文阅读总结</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/06/14/2021-06-easy/"><span class="level-item">2021-06-随笔</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="valine-thread"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/valine/1.4.14/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread' ,
            appId: "gSrIuSMF0CeWFLNM3mh6pPDT-gzGzoHsz",
            appKey: "mRMCdUc1FJMgDsQ4NMIqtc2H",
            
            avatar: "mm",
            
            meta: ["nick","mail","link"],
            pageSize: 10,
            lang: "zh-CN",
            visitor: true,
            highlight: true,
            
            
            
            
            
            requiredFields: [],
        });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://static.huhuapin.cn/uploads/2017/08/logo1.jpg" alt="胡华聘的个人博客"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">胡华聘的个人博客</p><p class="is-size-6 is-block">欢迎访问</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">26</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">13</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">36</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/huhuapin" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/huhuapin"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="CSDN" href="https://blog.csdn.net/qq867840692"><i class="fa fa-cube"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:867840692@qq.com"><i class="fas fa-envelope"></i></a></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://oxyzhg.cn/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Oxyzhg</span></span><span class="level-right"><span class="level-item tag">oxyzhg.cn</span></span></a></li><li><a class="level is-mobile" href="https://gaojiajun.cn/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">adcdGjj</span></span><span class="level-right"><span class="level-item tag">gaojiajun.cn</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Mysql/"><span class="level-start"><span class="level-item">Mysql</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/PHP/"><span class="level-start"><span class="level-item">PHP</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/java/"><span class="level-start"><span class="level-item">java</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/mysql/"><span class="level-start"><span class="level-item">mysql</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/python/"><span class="level-start"><span class="level-item">python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/uncategorized/"><span class="level-start"><span class="level-item">uncategorized</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/wordpress/"><span class="level-start"><span class="level-item">wordpress</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%89%8D%E7%AB%AF/"><span class="level-start"><span class="level-item">前端</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="level-start"><span class="level-item">数据结构</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%97%B6%E5%BA%8F/"><span class="level-start"><span class="level-item">时序</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97/"><span class="level-start"><span class="level-item">时间序列</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"><span class="level-start"><span class="level-item">服务器</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%9A%8F%E7%AC%94/"><span class="level-start"><span class="level-item">随笔</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#定义"><span class="level-left"><span class="level-item">1</span><span class="level-item"> 定义</span></span></a></li><li><a class="level is-mobile" href="#异常分类"><span class="level-left"><span class="level-item">2</span><span class="level-item"> 异常分类</span></span></a></li><li><a class="level is-mobile" href="#常见方法"><span class="level-left"><span class="level-item">3</span><span class="level-item"> 常见方法</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#stl分解统计方法"><span class="level-left"><span class="level-item">3.1</span><span class="level-item"> STL分解（统计方法）</span></span></a></li><li><a class="level is-mobile" href="#arima统计方法"><span class="level-left"><span class="level-item">3.2</span><span class="level-item"> ARIMA（统计方法）</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#ar模型"><span class="level-left"><span class="level-item">3.2.1</span><span class="level-item"> AR模型</span></span></a></li><li><a class="level is-mobile" href="#ma模型"><span class="level-left"><span class="level-item">3.2.2</span><span class="level-item"> MA模型</span></span></a></li><li><a class="level is-mobile" href="#arma模型"><span class="level-left"><span class="level-item">3.2.3</span><span class="level-item"> ARMA模型</span></span></a></li><li><a class="level is-mobile" href="#arima模型"><span class="level-left"><span class="level-item">3.2.4</span><span class="level-item"> ARIMA模型</span></span></a></li></ul></li><li><a class="level is-mobile" href="#lof机器学习方法"><span class="level-left"><span class="level-item">3.3</span><span class="level-item"> LOF（机器学习方法）</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#定义-2"><span class="level-left"><span class="level-item">3.3.1</span><span class="level-item"> 定义</span></span></a></li></ul></li><li><a class="level is-mobile" href="#lstm"><span class="level-left"><span class="level-item">3.4</span><span class="level-item"> LSTM</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#遗忘门"><span class="level-left"><span class="level-item">3.4.1</span><span class="level-item"> 遗忘门</span></span></a></li><li><a class="level is-mobile" href="#输入门"><span class="level-left"><span class="level-item">3.4.2</span><span class="level-item"> 输入门</span></span></a></li><li><a class="level is-mobile" href="#输出门"><span class="level-left"><span class="level-item">3.4.3</span><span class="level-item"> 输出门</span></span></a></li><li><a class="level is-mobile" href="#lstm-ae"><span class="level-left"><span class="level-item">3.4.4</span><span class="level-item"> LSTM-AE</span></span></a></li></ul></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-08-14T06:26:26.000Z">2022-08-14</time></p><p class="title"><a href="/2022/08/14/Mybatis-Plus-Json-To-Properites/">Mybatis Plus Json格式字段的映射</a></p><p class="categories"><a href="/categories/java/">java</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-07-19T07:26:26.000Z">2022-07-19</time></p><p class="title"><a href="/2022/07/19/Mysql-optimize/">Mysql的Limit查询优化</a></p><p class="categories"><a href="/categories/mysql/">mysql</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-06-17T03:24:36.000Z">2022-06-17</time></p><p class="title"><a href="/2022/06/17/Hibernate/">Hibernate</a></p><p class="categories"><a href="/categories/java/">java</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-03-14T06:26:26.000Z">2022-03-14</time></p><p class="title"><a href="/2022/03/14/python-selenium/">使用python+selenium爬取抖音数据</a></p><p class="categories"><a href="/categories/python/">python</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-10-29T08:04:25.000Z">2021-10-29</time></p><p class="title"><a href="/2021/10/29/kettle-problems/">使用kettle遇到的一些问题</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://static.huhuapin.cn/uploads/2017/08/logo1.jpg" alt="胡华聘的个人博客" height="28"></a><p class="is-size-7"><span>&copy; 2022 胡华聘</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><a href="http://beian.miit.gov.cn" target="_blank" rel="noopener">鲁ICP备17033420号</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="CSDN" href="https://blog.csdn.net/qq867840692"><i class="fab fa-cube"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="GitHub" href="https://github.com/huhuapin"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>